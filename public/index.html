<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AstraFX • analyzer</title>
  <style>
    :root{
      --fg:#f4f6fb; --muted:#ccd2e2; --accent:#7aa2f7; --shadow:rgba(0,0,0,.38);
      --panel:rgba(14,18,34,.65); --border:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--fg); background:#0b0f1c;}
    .wrap{position:relative; min-height:100vh; overflow:hidden;}

    /* background video (ORIGINAL) */
    video.bg{
      position:fixed; top:50%; left:50%;
      min-width:100%; min-height:100%;
      width:auto; height:auto;
      transform:translate(-50%,-50%);
      object-fit:cover; filter:contrast(1.05) saturate(1.05);
      z-index:-1;
    }
    .overlay{position:fixed; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.58)); z-index:0;}

    /* page content */
    main{position:relative; z-index:1; max-width:1400px; margin:0 auto; padding:22px; display:flex; flex-direction:column; gap:20px;}

    /* brand row */
    .brandRow{
      width:min(96vw, 1280px);
      margin:8vh auto 8px auto;
      display:flex; gap:16px;
      justify-content:flex-start;
      align-items:flex-end;
      text-align:left;
    }
    .brandText{display:none; font-weight:900; font-size:48px; letter-spacing:.5px;}
    .logo{height:110px; width:auto; display:block;}
    .pill{
      background:rgba(165,180,252,.18); color:#e0e7ff; border:1px solid rgba(165,180,252,.35);
      padding:8px 16px; border-radius:999px; font-weight:800; font-size:16px;
      margin-left:6px; margin-bottom:6px;
    }

    /* CLEAN centered feature area (transparent, no outer box) */
    .embed{
      width:min(96vw, 1280px);
      margin:0 auto;
      background:transparent; border:none;
      border-radius:0; padding:0; box-shadow:none;
    }
    .embed .box{
      position:relative; width:100%; padding-top:56.25%;  /* 16:9 */
      border-radius:10px; background:#000;
      border:none; overflow:hidden;
    }
    .vidFit{
      position:absolute; inset:0; display:grid; place-items:center;
      background:#000;
    }
    .vidFit > video{
      width:100%; height:100%;
      object-fit:contain;                 /* show ENTIRE video (no crop) */
      background:#000;
    }

    /* cards */
    .card{
      width:min(96vw, 900px);
      margin:0 auto;
      background:var(--panel); border:1px solid var(--border);
      border-radius:14px; padding:16px; box-shadow:0 10px 30px var(--shadow);
    }
    /* narrow signup card */
    #signupCard{ width:min(92vw, 420px); }

    label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px;}
    input{
      width:100%; background:rgba(0,0,0,.35); border:1px solid var(--border); color:var(--fg);
      border-radius:10px; padding:10px 12px; outline:none;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .btn{
      appearance:none; border:none; padding:10px 14px; border-radius:10px; font-weight:800; cursor:pointer;
      background:var(--accent); color:#0b0f1c;
    }
    .btn.ghost{background:rgba(255,255,255,.08); color:var(--fg); border:1px solid var(--border);}
    .hint{color:var(--muted); font-size:12px;}
  </style>
</head>
<body>
  <div class="wrap">
    <video class="bg" src="/assets/landing.mp4" autoplay muted loop playsinline preload="auto"></video>
    <div class="overlay"></div>

    <main>
      <!-- Brand row -->
      <div class="brandRow">
        <img class="logo" src="/assets/logo.png" alt="AstraFX"
             onerror="this.style.display='none';document.querySelector('.brandText').style.display='inline-block';">
        <div class="brandText">AstraFX</div>
        <span class="pill">analyzer</span>
      </div>

      <!-- Feature area: plays your new video INSIDE at full frame (no crop) -->
      <section class="embed">
        <div class="row" style="margin-bottom:8px; justify-content:space-between;">
          <div style="font-weight:800;">Featured video</div>
          <div class="hint">Click play to watch</div>
        </div>
        <div class="box">
          <div class="vidFit">
            <video id="featureVideo" controls preload="metadata" poster="/assets/landing_poster.jpg">
              <source src="/assets/landing_hero.mp4" type="video/mp4" />
              Sorry, your browser doesn’t support HTML5 video.
            </video>
          </div>
        </div>
      </section>

      <!-- 1) What is AstraFX? -->
      <section class="card">
        <div style="font-weight:800; margin-bottom:6px;">What is AstraFX?</div>
        <div class="hint">
          Here you can scan multiple pairs and time frames for strategies and pattern setups. The scan will be completed on the major currency
          pairs and gold. (EUR/USD, GBP/USD, USD/JPY, AUD/USD, USD/CAD, USD/CHF, NZD/USD, XAU/USD)
        </div>
      </section>

      <!-- 2) Create account / Login (narrow, original server-driven flow) -->
      <section class="card" id="signupCard">
        <div class="row" style="margin-bottom:12px;">
          <div style="font-weight:800;">Create account / Login</div>
          <div class="hint">Sign up to get access & updates.</div>
        </div>
        <label>Email</label>
        <input id="email" type="email" placeholder="you@domain.com" />
        <label style="margin-top:10px;">Password</label>
        <input id="password" type="password" placeholder="Password (min 6 chars)" />
        <div class="row" style="margin-top:10px;">
          <button class="btn" id="signupBtn">Create account</button>
          <button class="btn ghost" id="loginBtn" type="button">Login</button>
        </div>
        <div id="msg" class="hint" style="margin-top:10px;"></div>
      </section>

      <!-- 3) Privacy -->
      <section class="card" id="privacy" style="width:max-content;margin:0 auto">
        <div style="font-weight:800; margin-bottom:6px;">Privacy</div>
        <div class="hint">
          Your email will never be given out or sold to any third parties and will only be used for this website.
        </div>
      </section>
    </main>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    async function postJSON(url, data){
      const res = await fetch(url, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data)});
      let js = {}; try { js = await res.json(); } catch {}
      return {ok: res.ok, status: res.status, json: js};
    }
    const msg = document.getElementById('msg') || (function(){ const p=document.createElement('div'); p.id='msg'; p.className='hint'; p.style.marginTop='8px'; document.getElementById('signupBtn').parentElement.appendChild(p); return p; })();
    document.getElementById('signupBtn').addEventListener('click', async () => {
      const email = $('email').value.trim();
      const password = $('password').value.trim();
      if(!email || !password){ msg.textContent = 'Please enter email and password.'; return; }
      const {ok, json} = await postJSON('/api/signup', {email, password});
      if(ok){
        alert(`Account created for: ${email}\nPassword: ${password}\n\nPlease write this combination down.`);
        msg.textContent = 'Account created. Click Login to continue.';
      }else{
        msg.textContent = json.detail || 'Signup failed.';
      }
    });
    document.getElementById('loginBtn').addEventListener('click', async () => {
      const email = $('email').value.trim();
      const password = $('password').value.trim();
      if(!email || !password){ msg.textContent = 'Please enter email and password.'; return; }
      const {ok, json} = await postJSON('/api/login', {email, password});
      if(ok){ window.location.href = '/app/'; }
      else{ msg.textContent = json.detail || 'Login failed.'; }
    });
  </script>

</body>
</html>
