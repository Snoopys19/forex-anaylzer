<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AstraFX · analyzer</title>
  <style>
    :root{
      --fg:#f4f6fb; --muted:#ccd2e2; --accent:#2f63ff; --accent2:#2ec9ff; --accent3:#ff8a00;
      --panel:rgba(14,18,30,.35); --border:rgba(255,255,255,.12);
      --shadow:0 20px 60px rgba(0,0,0,.38);
    }

    html,body{height:100%; margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--fg); background:#0B0F1C;}
    *{box-sizing:border-box}

    /* ===== FULL-SCREEN BACKGROUND (unchanged original video) ===== */
    .bg video{
      position:fixed; top:50%; left:50%;
      min-width:100vw; min-height:100vh; width:auto; height:auto;
      transform:translate(-50%,-50%);
      object-fit:cover; filter:contrast(1.05) saturate(1.05);
      z-index:0;
    }
    .overlay{position:fixed; inset:0; background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.58)); z-index:1; pointer-events:none;}

    /* ===== content wrapper ===== */
    .wrap{position:relative; z-index:2; max-width:1500px; margin:auto; padding:22px; display:flex; flex-direction:column; gap:28px; min-height:100vh;}

    /* brand row */
    .brandRow{display:flex; gap:20px; align-items:flex-end; justify-content:flex-start;}
    .logo{height:110px; width:auto; display:block;}
    .pill{background:rgba(46,99,255,.92); color:#fff; font-weight:600; font-size:14px; line-height:1; padding:8px 16px; border-radius:999px; border:1px solid rgba(255,255,255,.35); transform:translateY(6px); box-shadow:0 8px 26px rgba(0,0,0,.35);}

    /* ===== CLEAN feature area (no surrounding box), larger, full video visible ===== */
    .embed{width:min(98vw,1400px); margin:0 auto; background:transparent; border:none; padding:0; box-shadow:none; backdrop-filter:none;}
    .featureWrap{
      position:relative;
      width:min(98vw,1350px);
      aspect-ratio:16/9;
      margin:0 auto;
      border-radius:12px;
      overflow:hidden;
      background:#000;
      border:none;
    }
    .featureVideo{
      position:absolute; inset:0; width:100%; height:100%;
      object-fit:contain; /* show entire frame without cropping */
      background:#000;
    }
    .fvOverlay{position:absolute; inset:0; display:grid; place-items:center; pointer-events:none;}
    .fvOverlay[hidden]{display:none;}
    .fvOverlay button{pointer-events:auto; width:110px; height:110px; border-radius:9999px; border:2px solid rgba(255,255,255,.55); background:rgba(0,0,0,.38); color:#fff; font-size:42px; line-height:1; cursor:pointer; backdrop-filter:blur(2px); box-shadow:0 10px 30px rgba(0,0,0,.35);}

    /* ===== informational & account sections ===== */
    .card{width:min(95vw, 980px); margin:0 auto; background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:18px 16px; box-shadow:var(--shadow); backdrop-filter:saturate(1.05) blur(1.5px);}
    .card.narrow{width:min(95vw, 640px);} /* account box narrower */
    h2{margin:0 0 8px 0; font-weight:700; letter-spacing:.2px;}
    p{margin:0; color:var(--muted)}

    .account{display:flex; flex-direction:column; gap:12px}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:flex-start}
    .row input{flex:1 1 260px; min-width:240px; background:rgba(255,255,255,.06); color:var(--fg); border:1px solid var(--border); border-radius:10px; padding:10px 12px; outline:none;}
    .row button{background:var(--accent); color:#fff; font-weight:700; border:0; border-radius:10px; padding:10px 16px; cursor:pointer; box-shadow:0 6px 22px rgba(47,99,255,.32);}
    .hint{font-size:13px; color:var(--muted)}

    /* privacy = only as wide as the text, centered */
    .privacy{width:max-content; max-width:95vw; margin:0 auto; background:var(--panel); border:1px solid var(--border); border-radius:999px; padding:10px 16px; box-shadow:var(--shadow); text-align:center;}

    /* play overlay for BACKGROUND only if needed */
    #playOverlay{position:fixed; inset:0; z-index:3; display:grid; place-items:center; pointer-events:none;}
    #playOverlay[hidden]{display:none}
    #playOverlay button{pointer-events:auto; width:96px; height:96px; border-radius:9999px; border:2px solid rgba(255,255,255,.55); background:rgba(0,0,0,.35); color:#fff; font-size:36px; line-height:1; cursor:pointer; backdrop-filter:blur(2px); box-shadow:0 10px 30px rgba(0,0,0,.35);}

    @media (max-width:900px){
      .logo{height:86px}
      .pill{font-size:13px; padding:7px 14px}
      .featureWrap{width:min(98vw,1100px);}
    }
  </style>
</head>
<body>

  <!-- ===== ORIGINAL background video (unchanged) ===== -->
  <div class="bg">
    <video id="bgVideo"
           autoplay muted loop playsinline webkit-playsinline preload="metadata"
           poster="/assets/landing_poster.jpg">
      <source src="/assets/landing.mp4" type="video/mp4" />
    </video>
  </div>
  <div class="overlay" aria-hidden="true"></div>
  <div id="playOverlay" hidden><button type="button" aria-label="Play background video">▶</button></div>

  <!-- ===== Content ===== -->
  <div class="wrap">

    <!-- Brand -->
    <div class="brandRow">
      <img class="logo" src="/assets/logo.png" alt="AstraFX logo" />
      <div class="pill">analyzer</div>
    </div>

    <!-- Feature area (NEW video INSIDE; larger; full frame visible; no surrounding box) -->
    <div class="embed" aria-label="Featured video">
      <div class="featureWrap">
        <video id="featureVideo" class="featureVideo"
               controls
               preload="metadata"
               poster="/assets/landing_poster.jpg">
          <source src="/assets/landing_hero.mp4" type="video/mp4" />
          Sorry, your browser doesn’t support HTML5 video.
        </video>
        <!-- Center play overlay for feature video (covers full video area) -->
        <div id="fvOverlay" class="fvOverlay">
          <button type="button" aria-label="Play video">▶</button>
        </div>
      </div>
    </div>

    <!-- What is AstraFX? -->
    <section class="card">
      <h2>What is AstraFX?</h2>
      <p>Scan multiple pairs and time frames for strategy setups. The scan will be completed on the major currency pairs and gold. (EUR/USD, GBP/USD, USD/JPY, AUD/USD, USD/CAD, USD/CHF, NZD/USD, XAU/USD)</p>
    </section>

    <!-- Create account / Login (labels simplified) -->
    <section class="card narrow">
      <h2>Create account / Login</h2>
      <div class="account">
        <div class="row">
          <input id="email" type="email" placeholder="Email address" autocomplete="email" />
          <input id="pass" type="password" placeholder="Password" autocomplete="new-password" />
        </div>
        <div class="row">
          <button id="createBtn" type="button">Create account</button>
          <button id="loginBtn" type="button">Login</button>
        </div>
        <div class="hint">Sign up to get access and updates.</div>
      </div>
    </section>

    <!-- Privacy -->
    <div class="privacy">Your email will never be given out or sold to any third parties and will only be used for this website.</div>

  </div>

  <!-- ===== Scripts ===== -->
  <script>
    // Background video autoplay handler (center button only if needed)
    (function () {
      const v = document.getElementById('bgVideo');
      const overlay = document.getElementById('playOverlay');
      const btn = overlay ? overlay.querySelector('button') : null;
      const hide = () => overlay && overlay.setAttribute('hidden','');
      const show = () => overlay && overlay.removeAttribute('hidden');
      async function tryPlay(){ try{ v.muted = true; await v.play(); hide(); } catch(e){ show(); } }
      if (v.readyState >= 2) tryPlay(); else v.addEventListener('loadeddata', tryPlay, { once:true });
      v.addEventListener('play', hide); v.addEventListener('pause', show);
      if (btn) btn.addEventListener('click', tryPlay);
    })();

    // Feature video overlay play (inside the placeholder) — with sound, not autoplay
    (function () {
      const v = document.getElementById('featureVideo');
      const ov = document.getElementById('fvOverlay');
      const btn = ov ? ov.querySelector('button') : null;
      function hide(){ ov && ov.setAttribute('hidden',''); }
      function show(){ ov && ov.removeAttribute('hidden'); }
      // show overlay until user plays
      show();
      v.addEventListener('play', hide);
      v.addEventListener('pause', show);
      if (btn) btn.addEventListener('click', () => { v.play().catch(()=>{}); });
      if (!v.paused) hide();
    })();

    // Client-side account storage & compatibility: set expected auth keys for /app
    (function(){
      const email = document.getElementById('email');
      const pass  = document.getElementById('pass');
      const createBtn = document.getElementById('createBtn');
      const loginBtn  = document.getElementById('loginBtn');

      function getUsers(){
        try { return JSON.parse(localStorage.getItem('astrafxUsers')||'{}'); }
        catch{ return {}; }
      }
      function saveUsers(u){ localStorage.setItem('astrafxUsers', JSON.stringify(u)); }

      function setAuthKeys(e){
        try {
          // Primary flags many gates expect
          localStorage.setItem('astrafxAuth','1');
          sessionStorage.setItem('astrafxAuth','1');
          // Keep email separately
          localStorage.setItem('astrafxUser', e);
          sessionStorage.setItem('astrafxUser', e);
          // Back-compat
          localStorage.setItem('astra_auth','1');
          sessionStorage.setItem('astra_auth','1');
          document.cookie = 'astrafx_auth=1; path=/; max-age=31536000; SameSite=Lax';
          document.cookie = 'astrafx_user=' + encodeURIComponent(e) + '; path=/; max-age=31536000; SameSite=Lax';
        } catch(_) {}
      }

      createBtn.addEventListener('click', () => {
        const e = (email.value||'').trim().toLowerCase();
        const p = (pass.value||'').trim();
        if(!e || !p){ alert('Please enter an email and password.'); return; }
        const users = getUsers();
        users[e] = p;
        saveUsers(users);
        setAuthKeys(e);
        alert('Account created!\n\nPlease write your email and password down in case you forget.');
      });

      loginBtn.addEventListener('click', () => {
        const e = (email.value||'').trim().toLowerCase();
        const p = (pass.value||'').trim();
        const users = getUsers();
        if(users[e] && users[e] === p){
          setAuthKeys(e);
          window.location.href = '/app';
        } else {
          alert('Incorrect email or password.');
        }
      });
    })();
  </script>
</body>
</html>
